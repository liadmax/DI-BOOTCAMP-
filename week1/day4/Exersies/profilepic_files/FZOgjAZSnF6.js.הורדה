if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("useProductItem_node.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"useProductItem_node"};e.exports=a}),null);
__d("useShopProduct_node.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"useShopProduct_node"};e.exports=a}),null);
__d("CometFeedStoryPhotoAttachment_attachment.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"CometFeedStoryPhotoAttachment_attachment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:"photo_image",args:[{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"sizing",value:"cover-fill"},{kind:"Literal",name:"width",value:500}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useCometFeedPhotoBackgroundColorRelay_photo"},{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"useCometPhotoViewerPlaceholderPassthroughProps_photo"},{args:null,kind:"FragmentSpread",name:"CometFeedStoryPhotoAttachmentUtil_ShopPDPURI"},{alias:null,args:null,concreteType:"Vect2",kind:"LinkedField",name:"focus",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null},{alias:null,args:[{kind:"Literal",name:"site",value:"www"}],kind:"ScalarField",name:"url",storageKey:'url(site:"www")'},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Photo",abstractKey:null}],storageKey:null}],type:"StoryAttachment",abstractKey:null};e.exports=a}),null);
__d("CometFeedStoryPhotoAttachmentUtil_ShopPDPURI.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b=[a];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometFeedStoryPhotoAttachmentUtil_ShopPDPURI",selections:[{alias:null,args:null,concreteType:"ProductTag",kind:"LinkedField",name:"photo_product_tags",plural:!0,selections:[{alias:null,args:null,concreteType:"ProductItem",kind:"LinkedField",name:"product_item",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"useProductItem_node",selections:[a,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:b,storageKey:null}]}],storageKey:null},{alias:null,args:null,concreteType:"ShopProduct",kind:"LinkedField",name:"shop_product",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"useShopProduct_node",selections:b}],storageKey:null}],storageKey:null}],type:"Photo",abstractKey:null}}();e.exports=a}),null);
__d("ProductTagPostClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744228");c=b("FalcoLoggerInternal").create("product_tag_post_click",a);e.exports=c}),null);
__d("CometProductTagLoggingUtils",["ProductTagPostClickFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,d,e,f,g){c("ProductTagPostClickFalcoEvent").log(function(){return{ad_id:a,component:b,funnel_id:d,marketplace_surface:e,post_id:f,referral_code:g}})};b=function(a){var b;a==="AYMTNotificationChannel"?b="aymt_retro_tag_jewel":a==="AYMTEmailChannel"?b="aymt_retro_tag_email":a==="AYMTPageAdminMegaphoneV2Channel"||a==="AYMTPageAdminMegaphoneChannel"?b="aymt_retro_tag_megaphone":a==="AYMTUnknownChannel"&&(b="aymt_unknown_channel");return b};d=function(a,b,c,d){switch(a){case"home_feed":case"posts_feed":if(b===1&&c)return"product_details";else if(d)return"video_fullscreen";else return"photo_fullscreen";case"video_feed":return"video_fullscreen";default:return"unknown"}};e=function(a,b){var c=null,d=null,e=!1;switch(a){case"NEWSFEED":c="home_feed";d="newsfeed";e=!0;break;case"PAGE_TIMELINE":case"TIMELINE":c="posts_feed";d="pages_feed";break;default:(a==null?void 0:a.includes("VIDEO"))||b==="video_home"?(c="video_feed",d="video_home",e=!0):(a==null?void 0:a.includes("GROUP"))&&(c=null,d="group_mall")}return{analyticsPage:c,isTabFeed:e,surface:(a=d)!=null?a:b}};g.logProductTagPostClick=a;g.getAYMTChannelName=b;g.getAnalyticsDestinationPage=d;g.getSurface=e}),98);
__d("ProductNode",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.getId=function(){var a;return(a=(a=this.$1)==null?void 0:a.id)!=null?a:(a=this.$2)==null?void 0:a.id};b.getProductId=function(){var a;return(a=(a=this.$1)==null?void 0:a.product_id)!=null?a:(a=this.$2)==null?void 0:a.product_id};b.getMerchantId=function(){var a;return(a=(a=this.$1)==null?void 0:a.merchant_id)!=null?a:(a=this.$2)==null?void 0:a.merchant_id};return a}();f["default"]=a}),66);
__d("useProductItem",["RelayHooks","useProductItem_node.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("useProductItem_node.graphql");function a(a){if(a===void 0)return null;a=(a=d("RelayHooks").readInlineData(i,a))!=null?a:{};var b=a==null?void 0:a.id;if(b==null)return null;a=a==null?void 0:(a=a.page)==null?void 0:a.id;a={id:b,merchant_id:a,product_id:b};return a}g.useProductItem=a}),98);
__d("useShopProduct",["RelayHooks","useShopProduct_node.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("useShopProduct_node.graphql");function a(a){if(a===void 0)return null;a=(a=d("RelayHooks").readInlineData(i,a))!=null?a:{};a=a==null?void 0:a.id;if(a==null)return null;var b=a.split(":");if((b==null?void 0:b.length)!==3||b[0]!=="SP")return null;b[0];var c=b[1];b=b[2];a={id:a,merchant_id:c,product_id:b};return a}g.useShopProduct=a}),98);
__d("XCometCommerceProductItemControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/commerce/products/{?slug}/{listing_id}/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("CometFeedStoryPhotoAttachmentUtil",["Actor","CometFeedStoryPhotoAttachmentUtil_ShopPDPURI.graphql","CometRelay","ProductNode","XCometCommerceProductItemControllerRouteBuilder","useProductItem","useShopProduct"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e,f){var g;a=d("CometRelay").useFragment(h!==void 0?h:h=b("CometFeedStoryPhotoAttachmentUtil_ShopPDPURI.graphql"),(a=a)!=null?a:null);var i=d("Actor").useActor();i=i[0];g=(a==null?void 0:(g=a.photo_product_tags)==null?void 0:g.length)||0;var j=null,k=null;a=a==null?void 0:(a=a.photo_product_tags)==null?void 0:a[0];a=new(c("ProductNode"))(d("useShopProduct").useShopProduct(a==null?void 0:a.shop_product),d("useProductItem").useProductItem(a==null?void 0:a.product_item));if(g===1){k=a.getProductId();g=a.getMerchantId();k!=null&&i!==g&&(j=c("XCometCommerceProductItemControllerRouteBuilder").buildURL({listing_id:k,ref:e,referral_code:f}))}return{productID:k,shopPDPURI:j}}g.useGetDirectToPDPInfo=a}),98);
__d("useOpenPhotoAttachmentKeyCommand",["CometFeedStoryAttachmentCommandWidget","cometGetKeyCommandConfig","react"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useMemo,j=b.useRef;function a(a){var b=j(null),e=h(function(){var a=b.current;a!=null&&a.click()},[]),f=i(function(){return!a?[d("cometGetKeyCommandConfig").getCometAndGeminiKeyCommandConfig("newsfeed","openAttachment",e)]:[]},[e,a]);c("CometFeedStoryAttachmentCommandWidget").useKeyCommands(f);return b}g["default"]=a}),98);
__d("CometFeedStoryPhotoAttachment.react",["Actor","CometErrorBoundary.react","CometFeedStoryPhotoAttachmentImplementation","CometFeedStoryPhotoAttachmentUtil","CometFeedStoryPhotoAttachment_attachment.graphql","CometFeedUnitQueryVariablesContext","CometImage.react","CometPlaceholder.react","CometPressable.react","CometProductTagFunnelIDContext","CometProductTagLoggingUtils","CometRelay","CometTrackingCodeContext","CometTrackingNodeProvider.react","CometTrackingNodesContext","CometWarningScreenContext","emptyFunction","getAggregatedStoryTrackingNodeIndex","gkx","react","requireDeferred","stylex","unrecoverableViolation","useCometFeedPhotoBackgroundColorRelay","useCometPhotoViewerPlaceholderPassthroughProps","useOpenPhotoAttachmentKeyCommand"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react"),j=d("react").useContext,k=c("requireDeferred")("ActnSellerTagProductPillClickFalcoEvent").__setRef("CometFeedStoryPhotoAttachment.react"),l=c("requireDeferred")("CommercePdpProductTagClickFalcoEvent").__setRef("CometFeedStoryPhotoAttachment.react"),m=c("gkx")("708253"),n={border:{borderBottom:"linmgsc8",borderTop:"opwvks06",bottom:"i09qtzwb",end:"n7fi1qx3",pointerEvents:"hzruof5a",position:"pmk7jnqg",start:"j9ispegn",top:"kr520xx4"},featuredCard:{height:"datstx6m",objectFit:"bixrwtb6",width:"k4urcfbm"},imageButton:{display:"a8c37x1j",":active":{transform:"tm8avpzi"}},mediaPressed:{backgroundColor:"r9n4d945"}};function a(a){var e,f,g,o,p,q,r,s,t=d("CometRelay").useFragment(h!==void 0?h:h=b("CometFeedStoryPhotoAttachment_attachment.graphql"),a.attachment),u=j(c("CometTrackingCodeContext")),v=j(c("CometTrackingNodesContext")),w=j(c("CometFeedUnitQueryVariablesContext")),x=d("CometWarningScreenContext").useIsOverlayShown(),y=d("CometWarningScreenContext").useHasOverlay();v=c("getAggregatedStoryTrackingNodeIndex")(v);e=c("useCometPhotoViewerPlaceholderPassthroughProps")({photo:((e=t.media)==null?void 0:e.__typename)==="Photo"?t.media:null,placeholderImageSrc:(e=t.media)==null?void 0:(e=e.photo_image)==null?void 0:e.uri});f=(f=t.media)==null?void 0:(f=f.photo_image)==null?void 0:f.uri;if(f==null)throw c("unrecoverableViolation")("mediaUri cannot be nullish in CometFeedStoryPhotoAttachment","comet_feed");g=((g=t.media)==null?void 0:g.accessibility_caption)||"";o=a.urlOverride!=null?a.urlOverride:(o=(o=t.media)==null?void 0:o.url)!=null?o:"";p=(p=a.heightOverride)!=null?p:(p=t.media)==null?void 0:(p=p.photo_image)==null?void 0:p.height;q=(q=t.media)==null?void 0:(q=q.photo_image)==null?void 0:q.width;r=(r=t.media)==null?void 0:(r=r.focus)==null?void 0:r.x;s=(s=t.media)==null?void 0:(s=s.focus)==null?void 0:s.y;if(q==null||p==null)throw c("unrecoverableViolation")("width and/or height cannot be nullish in CometFeedStoryPhotoAttachment","comet_feed");var z=d("Actor").useActor(),A=z[0],B=(z=t.media)==null?void 0:z.id,C=j(c("CometProductTagFunnelIDContext"));z=d("CometFeedStoryPhotoAttachmentUtil").useGetDirectToPDPInfo(((z=t.media)==null?void 0:z.__typename)==="Photo"?t.media:null);var D=z.productID;z=function(){if((a.hasProductTags===!0||a.hasProductMatch===!0||a.isUntagged)&&B!=null){var b=a.hasProductMatch===!0?"unconnected_commerce_product_match_on_newsfeed_"+B:"product_tag_on_newsfeed_"+B;d("CometProductTagLoggingUtils").logProductTagPostClick(a.adID,"CometFeedStoryPhotoAttachment",C,"newsfeed",B,b);D!=null&&l.onReady(function(c){c.log(function(){return{ad_id:a.adID,component:"CometFeedStoryPhotoAttachment",funnel_id:C,marketplace_surface:"newsfeed",post_id:B,product_id:D,referral_code:b}})});a.isUntagged===!0&&k.onReady(function(a){a.log(function(){return{container_post_id:B,creator_id:A,platform:"comet",referral_source:"feed_story",shoppable_content_type:"page_post"}})})}};var E=a.featuredCard;t=c("useCometFeedPhotoBackgroundColorRelay")(t.media);t=E===!0?i.jsx(c("CometImage.react"),{src:f,xstyle:n.featuredCard}):i.jsxs(i.Fragment,{children:[i.jsx(c("CometFeedStoryPhotoAttachmentImplementation"),{accentColor:t,accessibilityCaption:g,focusX:r,focusY:s,height:p,uri:f,width:q}),a.productTagLayer&&i.jsx(c("CometErrorBoundary.react"),{fallback:c("emptyFunction"),children:i.jsx(c("CometPlaceholder.react"),{fallback:null,children:a.productTagLayer})}),i.jsx("div",{className:c("stylex")(n.border)}),a.productTagOverlay]});g=a.preventInteraction===!0;r=c("useOpenPhotoAttachmentKeyCommand")(g);return i.jsx(c("CometTrackingNodeProvider.react"),{trackingNode:12,children:g||E===!0?t:i.jsx(c("CometPressable.react"),{display:"block",hideHoverOverlay:!0,linkProps:{passthroughProps:babelHelpers["extends"]({index:v,isUntagged:a.isUntagged,origOverlayShown:x,overlayExists:y,productTagFunnelID:C,storyRenderLocation:w==null?void 0:w.renderLocation,trackingCode:u},e),rel:m?void 0:"theater",url:o},onPress:z,overlayPressedStyle:n.mediaPressed,ref:r,testid:void 0,xstyle:n.imageButton,children:t})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);